地铁隧道巡线车云平台数据库设计说明
一、数据库整体架构
数据库名称：metro_inspection_db
基于关系型数据库（MySQL）设计，采用 InnoDB 引擎保证事务性和并发性能，通过外键关联实现模块解耦，核心模块包括：
系统管理：用户、角色、菜单、部门、权限关联、操作日志、登录日志
业务数据：任务信息、缺陷信息
监控数据：服务运行状态
二、核心表结构设计
1. 系统管理模块
1.1 部门表（sys_dept）
管理组织架构，支持树形层级。
Apply to App.vue
1.2 用户表（sys_user）
存储用户账号、权限、状态等信息。
Apply to App.vue
1.3 角色表（sys_role）
基于 RBAC 模型的角色定义，关联权限。
Apply to App.vue
1.4 菜单表（sys_menu）
管理系统菜单（含目录、按钮），支持前端路由。
Apply to App.vue
1.5 权限关联表
用户 - 角色关联（sys_user_role）：多对多关系，实现用户权限继承。
角色 - 菜单关联（sys_role_menu）：多对多关系，实现角色权限分配。
Apply to App.vue
1.6 日志表
操作日志（sys_oper_log）：记录用户操作轨迹，用于审计。
登录日志（sys_login_log）：记录用户登录状态、IP、设备等信息。
Apply to App.vue
2. 业务数据模块
2.1 任务表（task_info）
管理巡检任务的基本信息、执行状态。
Apply to App.vue
2.2 缺陷表（defect_info）
记录巡检发现的缺陷详情，关联任务。
Apply to App.vue
3. 监控模块（sys_service_monitor）
记录服务运行状态、资源占用（CPU、内存）。
Apply to App.vue
三、设计说明
关系设计：
用户与部门 多对一，角色与用户、菜单 多对多，任务与缺陷 一对多，通过外键关联保证数据一致性。
日志表独立存储，避免业务表冗余，提升查询性能。
数据加密：
用户密码采用 BCrypt 加密存储，防止明文泄露。
性能优化：
高频查询字段（如任务编号、用户ID）建立索引，加速搜索。
大文本字段（如图片路径、请求参数）使用 TEXT 类型，平衡存储与查询。
扩展能力：
状态字段采用 TINYINT 而非枚举，方便后续扩展（如任务状态新增“暂停”）。
外键约束采用 ON DELETE SET NULL 或 CASCADE，灵活处理数据删除逻辑。
通过以上设计，数据库可支撑任务管理、缺陷追溯、权限控制、日志审计等核心功能，满足地铁运维场景的高可靠、高并发需求。