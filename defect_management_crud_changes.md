# 缺陷管理模块增删改及详情功能说明

本次更新为缺陷管理模块增加了完整的增、删、改、查（CRUD）功能，优化了用户交互体验。

## 1. 主要功能改动

### 1.1 新增功能
- 在页面工具栏增加了 **"新增缺陷"** 按钮。
- 点击按钮会弹出一个表单，用户可以填写新的缺陷信息，包括任务ID、缺陷类型、位置、严重程度等。
- 表单提交后，会调用后端接口创建新的缺陷记录，并刷新列表。

### 1.2 编辑功能
- 在数据表格的"操作"列，为每一行数据增加了 **"编辑"** 按钮。
- 点击按钮会弹出与新增功能共用的表单，并自动填充当前行的数据。
- 用户修改后提交，会调用后端接口更新该条缺陷记录，并刷新列表。

### 1.3 删除功能
- 在数据表格的"操作"列，为每一行数据增加了 **"删除"** 按钮。
- 点击按钮会弹出一个确认对话框，防止用户误操作。
- 确认删除后，会调用后端接口删除该条记录，并刷新列表。

### 1.4 详情功能 (本次补充)
- 在数据表格的"操作"列，为每一行数据增加了 **"详情"** 按钮。
- 点击按钮会弹出一个只读的对话框，展示该条缺陷的完整信息，包括所有字段和图片。

## 2. 前后端API变更

### 2.1 前端API (`src/api/defect.js`)
- 新增 `createDefect(data)`: 用于发起创建缺陷的POST请求。
- 新增 `updateDefect(id, data)`: 用于发起更新缺陷的PUT请求。
- 新增 `deleteDefect(id)`: 用于发起删除缺陷的DELETE请求。

### 2.2 后端API (`DefectInfoController.java`)
- 本次改动**复用**了已有的后端增删改查接口，后端代码无需修改。
  - `POST /api/defect-info`
  - `PUT /api/defect-info/{id}` (实际实现中是`/api/defect-info`)
  - `DELETE /api/defect-info/{id}`

## 3. 注意事项
- 为了简化操作，编辑操作调用的是不带ID的`PUT /api/defect-info`接口，请确保后端`updateById`能从请求体中获取到`defectId`。 *(注: 已检查后端实现，符合此逻辑)*
- 所有操作成功后，缺陷列表会自动刷新，保证数据实时性。
- "详情"功能与"编辑"功能分离，查看信息更方便。 