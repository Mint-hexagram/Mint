# 缺陷管理处理流程与快速筛选功能说明

本次更新为缺陷管理模块增加了核心的处理流程和快速筛选功能，旨在提升操作效率和用户体验。

## 1. 主要功能改动

### 1.1 快速筛选 (本次新增)
- 在搜索栏下方，增加了一组 **"快速筛选"** 按钮，包括：
  - **[ 全部 ]**: 清除所有筛选条件，显示全部缺陷。
  - **[ 今日新增 ]**: 一键筛选出"上报时间"为今天的缺陷。
  - **[ 待处理 ]**: 一键筛选出"整改状态"为"未整改"的缺陷。
- 这为用户提供了常用维度的快捷查询入口，无需手动组合搜索条件。

### 1.2 缺陷确认 (单项 & 批量)
- **单项操作**: 在每行数据的操作列，为"未确认"的缺陷提供了一个 **"确认"** 按钮。点击后，该缺陷的"是否属实"状态会更新为"是"。
- **批量操作**:
  - 表格新增了复选框，用户可以选择多条缺陷。
  - 工具栏增加了 **"批量确认"** 按钮，点击后可一次性确认所有选中缺陷的真实性。

### 1.3 整改标记 (单项 & 批量)
- **单项操作**: 在操作列，为"未整改"或"整改中"的缺陷提供了一个 **"标记整改"** 按钮。点击后，该缺陷的"整改状态"会直接更新为"已整改"。
- **批量操作**:
  - 工具栏增加了 **"批量标记整改"** 按钮，点击后可将所有选中项的状态一键更新为"已整改"。

### 1.4 批量操作支持
- 整个列表现已支持通过复选框进行多项选择，为所有批量操作提供了基础。
- 批量操作按钮在未选择任何项目时会自动禁用，防止误操作。

## 2. 前后端API变更

### 2.1 前端API (`src/api/defect.js`)
- `confirmDefect(id)`: 确认单个缺陷。
- `markDefectRectified(id)`: 标记单个缺陷为已整改。
- `batchConfirmDefects(ids)`: 批量确认缺陷。
- `batchMarkDefectRectified(ids)`: 批量标记为已整改。

### 2.2 后端API (`DefectInfoController.java`)
- `POST /api/defect-info/{id}/confirm`: 处理单个确认请求。
- `POST /api/defect-info/{id}/rectify`: 处理单个标记整改请求。
- `POST /api/defect-info/batch-confirm`: 处理批量确认请求。
- `POST /api/defect-info/batch-rectify`: 处理批量标记整改请求。

## 3. 注意事项
- "确认"和"标记整改"按钮会根据缺陷的当前状态动态显示或隐藏，避免重复操作。
- 所有操作都增加了二次确认提示，确保数据安全。
- 操作成功后，列表会自动刷新。 